<?xml version="1.0" encoding="utf-8"?>

<commands>
  <command name="User.Login" type="text" connection="local">
    <![CDATA[
  SELECT TOP(1) ID,LoginID,Enabled FROM dbo.[User] WHERE LoginID=@LoginID AND Password=@Password AND [Deleted]=0
  ]]>
  </command>
  <command name="User.ChangePassword" type="text" connection="local">
    <![CDATA[
      UPDATE TOP(1) dbo.[User] SET Password=@Password,LastModifyTime=@LastModifyTime,LastModifyUser=@LastModifyUser WHERE ID=@ID
      ]]>
  </command>
  <command name="User.BatchUpdateGroup" type="text" connection="local">
    <![CDATA[
      UPDATE dbo.[User] SET [Group]=@NewGroup WHERE [Group]=@OldGroup AND [Deleted]=0
      ]]>
  </command>
  <command name="User.Update" type="text" connection="local">
    <![CDATA[
      UPDATE TOP(1) dbo.[User] SET [Phone]=@Phone,[Name]=@Name,[Group]=@Group,[Enabled]=@Enabled WHERE ID=@ID AND [Deleted]=0
      ]]>
  </command>
  <command name="User.Create" type="text" connection="local">
    <![CDATA[
INSERT INTO dbo.[User]
        ( ID ,
          LoginID ,
          Password ,
          Phone ,
          Name ,
          [Group] ,
          Enabled ,
          CreateTime ,
          LastLoginIP ,
          LastLoginTime ,
          LastModifyTime ,
          LastModifyUser
        )
VALUES  ( NEWID() , 
          @LoginID , 
          @Password, 
          @Phone,
          @Name, 
          @Group , 
          @Enabled ,
          GETDATE() ,
          NULL ,
          NULL,
          GETDATE() ,
          NULL
        )
  ]]>
  </command>
</commands>